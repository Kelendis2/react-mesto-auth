{"ast":null,"code":"import _defineProperty from\"/Users/kelendis/Documents/GitHab/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/kelendis/Documents/GitHab/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/kelendis/Documents/GitHab/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import headerLogo from\"../images/logo.svg\";import{useNavigate}from\"react-router-dom\";import*as auth from\"../utils/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(_ref){var handleLogin=_ref.handleLogin;var navigate=useNavigate();var goToRegistration=function goToRegistration(){navigate(\"/sign-up\");};var _React$useState=React.useState({email:\"\",password:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),formValue=_React$useState2[0],setFormValue=_React$useState2[1];var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValue(_objectSpread(_objectSpread({},formValue),{},_defineProperty({},name,value)));};var email=formValue.email,password=formValue.password;var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),errorMessage=_React$useState4[0],setErrorMessage=_React$useState4[1];var handleSubmit=function handleSubmit(e){e.preventDefault();if(!formValue.email||!formValue.password){setErrorMessage(\"Both fields are required\");return;}auth.authorize(email,password).then(function(data){if(data.token){localStorage.setItem(\"jwt\",data.token);handleLogin({email:formValue.email});navigate(\"/users/me\");}}).catch(function(err){return setErrorMessage(err);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"header__logo\",alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\",src:headerLogo}),/*#__PURE__*/_jsx(\"button\",{className:\"header__button-registration\",onClick:goToRegistration,children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"registration\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"registration__title\",children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"input\",{className:\"registration__input\",placeholder:\"Email\",onChange:handleChange,id:\"email\",name:\"email\",type:\"email\",autoComplete:\"email\",value:formValue.email}),/*#__PURE__*/_jsx(\"input\",{className:\"registration__input\",placeholder:\"Password\",id:\"password\",required:true,name:\"password\",type:\"password\",autoComplete:\"current-password\",value:formValue.password,onChange:handleChange}),/*#__PURE__*/_jsxs(\"p\",{className:\"registration__error\",children:[\" \",errorMessage,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"registration__submit\",type:\"submit\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]});}export default Login;","map":{"version":3,"names":["React","headerLogo","useNavigate","auth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_ref","handleLogin","navigate","goToRegistration","_React$useState","useState","email","password","_React$useState2","_slicedToArray","formValue","setFormValue","handleChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","_React$useState3","_React$useState4","errorMessage","setErrorMessage","handleSubmit","preventDefault","authorize","then","data","token","localStorage","setItem","catch","err","children","className","alt","src","onClick","onSubmit","placeholder","onChange","id","type","autoComplete","required"],"sources":["/Users/kelendis/Documents/GitHab/react-mesto-auth/src/components/Login.js"],"sourcesContent":["import React from \"react\";\nimport headerLogo from \"../images/logo.svg\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as auth from \"../utils/auth\";\n\nfunction Login({handleLogin}) {\n  const navigate = useNavigate();\n\n  const goToRegistration = () => {\n    navigate(\"/sign-up\");\n  };\n\n  const [formValue, setFormValue] = React.useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormValue({\n      ...formValue,\n      [name]: value,\n    });\n  };\n\n  const { email, password } = formValue;\n\n  const [errorMessage, setErrorMessage] = React.useState(\"\");\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (!formValue.email || !formValue.password) {\n      setErrorMessage(\"Both fields are required\");\n      return;\n    }\n\n    auth\n      .authorize(email, password)\n      .then((data) => {\n        if (data.token) {\n          localStorage.setItem(\"jwt\", data.token);\n          handleLogin({email: formValue.email});\n          navigate(\"/users/me\");\n        }\n      })\n      .catch((err) => setErrorMessage(err));\n  };\n\n  return (\n    <>\n      <div className=\"header\">\n        <img className=\"header__logo\" alt=\"Логотип\" src={headerLogo} />\n        <button\n          className=\"header__button-registration\"\n          onClick={goToRegistration}\n        >\n          Регистрация\n        </button>\n      </div>\n      <form className=\"registration\" onSubmit={handleSubmit}>\n        <h2 className=\"registration__title\">Вход</h2>\n        <input\n          className=\"registration__input\"\n          placeholder=\"Email\"\n          onChange={handleChange}\n          id=\"email\"\n          name=\"email\"\n          type=\"email\"\n          autoComplete=\"email\"\n          value={formValue.email}\n        ></input>\n        <input\n          className=\"registration__input\"\n          placeholder=\"Password\"\n          id=\"password\"\n          required\n          name=\"password\"\n          type=\"password\"\n          autoComplete=\"current-password\"\n          value={formValue.password}\n          onChange={handleChange}\n        ></input>\n        <p className=\"registration__error\"> {errorMessage} </p>\n        <button className=\"registration__submit\" type=\"submit\">\n          Войти\n        </button>\n      </form>\n    </>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}